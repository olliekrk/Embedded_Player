ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 1


   1              		.cpu cortex-m7
   2              		.eabi_attribute 27, 1
   3              		.eabi_attribute 28, 1
   4              		.eabi_attribute 20, 1
   5              		.eabi_attribute 21, 1
   6              		.eabi_attribute 23, 3
   7              		.eabi_attribute 24, 1
   8              		.eabi_attribute 25, 1
   9              		.eabi_attribute 26, 1
  10              		.eabi_attribute 30, 1
  11              		.eabi_attribute 34, 1
  12              		.eabi_attribute 18, 4
  13              		.file	"controls.c"
  14              		.text
  15              	.Ltext0:
  16              		.cfi_sections	.debug_frame
  17              		.section	.text.CON_HandleOptionButtonTouched,"ax",%progbits
  18              		.align	1
  19              		.global	CON_HandleOptionButtonTouched
  20              		.syntax unified
  21              		.thumb
  22              		.thumb_func
  23              		.fpu fpv5-sp-d16
  25              	CON_HandleOptionButtonTouched:
  26              	.LFB138:
  27              		.file 1 "Modules/controls.c"
   1:Modules/controls.c **** //
   2:Modules/controls.c **** // Created by olliekrk on 21.10.2019.
   3:Modules/controls.c **** //
   4:Modules/controls.c **** 
   5:Modules/controls.c **** #include <term_io.h>
   6:Modules/controls.c **** #include "controls.h"
   7:Modules/controls.c **** #include "gui.h"
   8:Modules/controls.c **** 
   9:Modules/controls.c **** void CON_HandleButtonTouched(int buttonNumber) {
  10:Modules/controls.c ****     if (buttonNumber < 0 || buttonNumber >= NUMBER_OF_CONTROLS)
  11:Modules/controls.c ****         return;
  12:Modules/controls.c **** 
  13:Modules/controls.c ****     if (buttonNumber < NUMBER_OF_SOUND_CONTROLS) {
  14:Modules/controls.c ****         CON_HandleSoundButtonTouched(buttonNumber);
  15:Modules/controls.c ****     } else {
  16:Modules/controls.c ****         CON_HandleOptionButtonTouched(buttonNumber);
  17:Modules/controls.c ****     }
  18:Modules/controls.c **** }
  19:Modules/controls.c **** 
  20:Modules/controls.c **** void CON_HandleSoundButtonTouched(SoundControl button) {
  21:Modules/controls.c ****     switch (button) {
  22:Modules/controls.c ****         case CON_BUTTON_0:
  23:Modules/controls.c ****         case CON_BUTTON_1:
  24:Modules/controls.c ****         case CON_BUTTON_2:
  25:Modules/controls.c ****         case CON_BUTTON_3:
  26:Modules/controls.c ****         case CON_BUTTON_4:
  27:Modules/controls.c ****         case CON_BUTTON_5:
  28:Modules/controls.c ****         case CON_BUTTON_6:
  29:Modules/controls.c ****         case CON_BUTTON_7:
  30:Modules/controls.c ****             APP_STATE.SELECTED_SOUND_BUTTON = button;
  31:Modules/controls.c ****             if (APP_STATE.SELECTED_OPTION == -1) {
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 2


  32:Modules/controls.c ****                 CON_PlayLoadedSound(button);
  33:Modules/controls.c ****             } else {
  34:Modules/controls.c ****                 CON_ActivateOption();
  35:Modules/controls.c ****             }
  36:Modules/controls.c ****         default:
  37:Modules/controls.c ****             xprintf("Sound button touched is: %d\r\n", button);
  38:Modules/controls.c ****     }
  39:Modules/controls.c **** }
  40:Modules/controls.c **** 
  41:Modules/controls.c **** void CON_HandleOptionButtonTouched(OptionControl option) {
  28              		.loc 1 41 0
  29              		.cfi_startproc
  30              		@ args = 0, pretend = 0, frame = 0
  31              		@ frame_needed = 0, uses_anonymous_args = 0
  32              	.LVL0:
  33 0000 10B5     		push	{r4, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 8
  36              		.cfi_offset 4, -8
  37              		.cfi_offset 14, -4
  38 0002 0446     		mov	r4, r0
  42:Modules/controls.c ****     switch (option) {
  39              		.loc 1 42 0
  40 0004 A0F10A03 		sub	r3, r0, #10
  41 0008 022B     		cmp	r3, #2
  42 000a 04D9     		bls	.L5
  43              	.LVL1:
  44              	.L2:
  43:Modules/controls.c ****         case SELECTED_TRACK_NAME:
  44:Modules/controls.c ****         case EFFECT_1:
  45:Modules/controls.c ****         case EFFECT_2:
  46:Modules/controls.c **** 		xprintf("SHOULD WORK\r\n");
  47:Modules/controls.c ****             APP_STATE.SELECTED_OPTION = option;
  48:Modules/controls.c **** 		case NEXT_TRACK:
  49:Modules/controls.c ****         case BACK_TRACK:
  50:Modules/controls.c ****         default:
  51:Modules/controls.c ****             xprintf("Option button touched is: %d\r\n", option);
  45              		.loc 1 51 0
  46 000c 2146     		mov	r1, r4
  47 000e 0548     		ldr	r0, .L6
  48 0010 FFF7FEFF 		bl	xprintf
  49              	.LVL2:
  50 0014 10BD     		pop	{r4, pc}
  51              	.LVL3:
  52              	.L5:
  46:Modules/controls.c ****             APP_STATE.SELECTED_OPTION = option;
  53              		.loc 1 46 0
  54 0016 0448     		ldr	r0, .L6+4
  55              	.LVL4:
  56 0018 FFF7FEFF 		bl	xprintf
  57              	.LVL5:
  47:Modules/controls.c **** 		case NEXT_TRACK:
  58              		.loc 1 47 0
  59 001c 034B     		ldr	r3, .L6+8
  60 001e 5C60     		str	r4, [r3, #4]
  61 0020 F4E7     		b	.L2
  62              	.L7:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 3


  63 0022 00BF     		.align	2
  64              	.L6:
  65 0024 10000000 		.word	.LC1
  66 0028 00000000 		.word	.LC0
  67 002c 00000000 		.word	.LANCHOR0
  68              		.cfi_endproc
  69              	.LFE138:
  71              		.section	.text.CON_ActivateOption,"ax",%progbits
  72              		.align	1
  73              		.global	CON_ActivateOption
  74              		.syntax unified
  75              		.thumb
  76              		.thumb_func
  77              		.fpu fpv5-sp-d16
  79              	CON_ActivateOption:
  80              	.LFB139:
  52:Modules/controls.c ****     }
  53:Modules/controls.c **** }
  54:Modules/controls.c **** 
  55:Modules/controls.c **** void CON_ActivateOption() {
  81              		.loc 1 55 0
  82              		.cfi_startproc
  83              		@ args = 0, pretend = 0, frame = 0
  84              		@ frame_needed = 0, uses_anonymous_args = 0
  85 0000 08B5     		push	{r3, lr}
  86              	.LCFI1:
  87              		.cfi_def_cfa_offset 8
  88              		.cfi_offset 3, -8
  89              		.cfi_offset 14, -4
  56:Modules/controls.c ****     if (APP_STATE.SELECTED_OPTION && APP_STATE.SELECTED_SOUND_BUTTON) {
  90              		.loc 1 56 0
  91 0002 074B     		ldr	r3, .L12
  92 0004 5968     		ldr	r1, [r3, #4]
  93 0006 09B1     		cbz	r1, .L8
  94              		.loc 1 56 0 is_stmt 0 discriminator 1
  95 0008 1A68     		ldr	r2, [r3]
  96 000a 02B9     		cbnz	r2, .L11
  97              	.L8:
  98 000c 08BD     		pop	{r3, pc}
  99              	.L11:
  57:Modules/controls.c ****         switch (APP_STATE.SELECTED_OPTION) {
  58:Modules/controls.c ****             // todo: apply selected option to selected button
  59:Modules/controls.c ****             default:
  60:Modules/controls.c ****                 xprintf("Option no. %d activated with button: %d. \r\n",
 100              		.loc 1 60 0 is_stmt 1
 101 000e 0548     		ldr	r0, .L12+4
 102 0010 FFF7FEFF 		bl	xprintf
 103              	.LVL6:
  61:Modules/controls.c ****                         APP_STATE.SELECTED_OPTION,
  62:Modules/controls.c ****                         APP_STATE.SELECTED_SOUND_BUTTON
  63:Modules/controls.c ****                 );
  64:Modules/controls.c ****         }
  65:Modules/controls.c **** 
  66:Modules/controls.c ****         // Reset state
  67:Modules/controls.c ****         APP_STATE.SELECTED_OPTION = -1;
 104              		.loc 1 67 0
 105 0014 024B     		ldr	r3, .L12
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 4


 106 0016 4FF0FF32 		mov	r2, #-1
 107 001a 5A60     		str	r2, [r3, #4]
  68:Modules/controls.c ****         APP_STATE.SELECTED_SOUND_BUTTON = -1;
 108              		.loc 1 68 0
 109 001c 1A60     		str	r2, [r3]
  69:Modules/controls.c ****     }
  70:Modules/controls.c **** }
 110              		.loc 1 70 0
 111 001e F5E7     		b	.L8
 112              	.L13:
 113              		.align	2
 114              	.L12:
 115 0020 00000000 		.word	.LANCHOR0
 116 0024 00000000 		.word	.LC2
 117              		.cfi_endproc
 118              	.LFE139:
 120              		.section	.text.CON_HandleSoundButtonTouched,"ax",%progbits
 121              		.align	1
 122              		.global	CON_HandleSoundButtonTouched
 123              		.syntax unified
 124              		.thumb
 125              		.thumb_func
 126              		.fpu fpv5-sp-d16
 128              	CON_HandleSoundButtonTouched:
 129              	.LFB137:
  20:Modules/controls.c ****     switch (button) {
 130              		.loc 1 20 0
 131              		.cfi_startproc
 132              		@ args = 0, pretend = 0, frame = 0
 133              		@ frame_needed = 0, uses_anonymous_args = 0
 134              	.LVL7:
 135 0000 10B5     		push	{r4, lr}
 136              	.LCFI2:
 137              		.cfi_def_cfa_offset 8
 138              		.cfi_offset 4, -8
 139              		.cfi_offset 14, -4
 140 0002 0446     		mov	r4, r0
  21:Modules/controls.c ****         case CON_BUTTON_0:
 141              		.loc 1 21 0
 142 0004 0728     		cmp	r0, #7
 143 0006 07D8     		bhi	.L15
  30:Modules/controls.c ****             if (APP_STATE.SELECTED_OPTION == -1) {
 144              		.loc 1 30 0
 145 0008 064B     		ldr	r3, .L18
 146 000a 1860     		str	r0, [r3]
  31:Modules/controls.c ****                 CON_PlayLoadedSound(button);
 147              		.loc 1 31 0
 148 000c 5B68     		ldr	r3, [r3, #4]
 149 000e B3F1FF3F 		cmp	r3, #-1
 150 0012 01D0     		beq	.L15
  34:Modules/controls.c ****             }
 151              		.loc 1 34 0
 152 0014 FFF7FEFF 		bl	CON_ActivateOption
 153              	.LVL8:
 154              	.L15:
  37:Modules/controls.c ****     }
 155              		.loc 1 37 0
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 5


 156 0018 2146     		mov	r1, r4
 157 001a 0348     		ldr	r0, .L18+4
 158 001c FFF7FEFF 		bl	xprintf
 159              	.LVL9:
 160 0020 10BD     		pop	{r4, pc}
 161              	.L19:
 162 0022 00BF     		.align	2
 163              	.L18:
 164 0024 00000000 		.word	.LANCHOR0
 165 0028 00000000 		.word	.LC3
 166              		.cfi_endproc
 167              	.LFE137:
 169              		.section	.text.CON_HandleButtonTouched,"ax",%progbits
 170              		.align	1
 171              		.global	CON_HandleButtonTouched
 172              		.syntax unified
 173              		.thumb
 174              		.thumb_func
 175              		.fpu fpv5-sp-d16
 177              	CON_HandleButtonTouched:
 178              	.LFB136:
   9:Modules/controls.c ****     if (buttonNumber < 0 || buttonNumber >= NUMBER_OF_CONTROLS)
 179              		.loc 1 9 0
 180              		.cfi_startproc
 181              		@ args = 0, pretend = 0, frame = 0
 182              		@ frame_needed = 0, uses_anonymous_args = 0
 183              	.LVL10:
  10:Modules/controls.c ****         return;
 184              		.loc 1 10 0
 185 0000 0C28     		cmp	r0, #12
 186 0002 0AD8     		bhi	.L24
   9:Modules/controls.c ****     if (buttonNumber < 0 || buttonNumber >= NUMBER_OF_CONTROLS)
 187              		.loc 1 9 0
 188 0004 08B5     		push	{r3, lr}
 189              	.LCFI3:
 190              		.cfi_def_cfa_offset 8
 191              		.cfi_offset 3, -8
 192              		.cfi_offset 14, -4
  13:Modules/controls.c ****         CON_HandleSoundButtonTouched(buttonNumber);
 193              		.loc 1 13 0
 194 0006 0728     		cmp	r0, #7
 195 0008 03DD     		ble	.L27
  16:Modules/controls.c ****     }
 196              		.loc 1 16 0
 197 000a C0B2     		uxtb	r0, r0
 198              	.LVL11:
 199 000c FFF7FEFF 		bl	CON_HandleOptionButtonTouched
 200              	.LVL12:
 201 0010 08BD     		pop	{r3, pc}
 202              	.LVL13:
 203              	.L27:
  14:Modules/controls.c ****     } else {
 204              		.loc 1 14 0
 205 0012 C0B2     		uxtb	r0, r0
 206              	.LVL14:
 207 0014 FFF7FEFF 		bl	CON_HandleSoundButtonTouched
 208              	.LVL15:
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 6


 209 0018 08BD     		pop	{r3, pc}
 210              	.LVL16:
 211              	.L24:
 212              	.LCFI4:
 213              		.cfi_def_cfa_offset 0
 214              		.cfi_restore 3
 215              		.cfi_restore 14
 216 001a 7047     		bx	lr
 217              		.cfi_endproc
 218              	.LFE136:
 220              		.section	.text.CON_PlayLoadedSound,"ax",%progbits
 221              		.align	1
 222              		.global	CON_PlayLoadedSound
 223              		.syntax unified
 224              		.thumb
 225              		.thumb_func
 226              		.fpu fpv5-sp-d16
 228              	CON_PlayLoadedSound:
 229              	.LFB140:
  71:Modules/controls.c **** 
  72:Modules/controls.c **** void CON_PlayLoadedSound(int buttonNumber) {
 230              		.loc 1 72 0
 231              		.cfi_startproc
 232              		@ args = 0, pretend = 0, frame = 0
 233              		@ frame_needed = 0, uses_anonymous_args = 0
 234              		@ link register save eliminated.
 235              	.LVL17:
 236 0000 7047     		bx	lr
 237              		.cfi_endproc
 238              	.LFE140:
 240              		.global	APP_STATE
 241              		.section	.data.APP_STATE,"aw",%progbits
 242              		.align	2
 243              		.set	.LANCHOR0,. + 0
 246              	APP_STATE:
 247 0000 FFFFFFFF 		.word	-1
 248 0004 FFFFFFFF 		.word	-1
 249 0008 01000000 		.word	1
 250 000c 00000000 		.word	.LC4
 251 0010 00000000 		.space	8
 251      00000000 
 252              		.section	.rodata.CON_ActivateOption.str1.4,"aMS",%progbits,1
 253              		.align	2
 254              	.LC2:
 255 0000 4F707469 		.ascii	"Option no. %d activated with button: %d. \015\012\000"
 255      6F6E206E 
 255      6F2E2025 
 255      64206163 
 255      74697661 
 256              		.section	.rodata.CON_HandleOptionButtonTouched.str1.4,"aMS",%progbits,1
 257              		.align	2
 258              	.LC0:
 259 0000 53484F55 		.ascii	"SHOULD WORK\015\012\000"
 259      4C442057 
 259      4F524B0D 
 259      0A00
 260 000e 0000     		.space	2
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 7


 261              	.LC1:
 262 0010 4F707469 		.ascii	"Option button touched is: %d\015\012\000"
 262      6F6E2062 
 262      7574746F 
 262      6E20746F 
 262      75636865 
 263              		.section	.rodata.CON_HandleSoundButtonTouched.str1.4,"aMS",%progbits,1
 264              		.align	2
 265              	.LC3:
 266 0000 536F756E 		.ascii	"Sound button touched is: %d\015\012\000"
 266      64206275 
 266      74746F6E 
 266      20746F75 
 266      63686564 
 267              		.section	.rodata.str1.4,"aMS",%progbits,1
 268              		.align	2
 269              	.LC4:
 270 0000 4F4B00   		.ascii	"OK\000"
 271              		.text
 272              	.Letext0:
 273              		.file 2 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\machine\\_default_types.h"
 274              		.file 3 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_stdint.h"
 275              		.file 4 "Drivers/CMSIS/Include/core_cm7.h"
 276              		.file 5 "Drivers/CMSIS/Device/ST/STM32F7xx/Include/system_stm32f7xx.h"
 277              		.file 6 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\lock.h"
 278              		.file 7 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\_types.h"
 279              		.file 8 "c:\\gcc_toolchain\\6_2017-q1-update\\lib\\gcc\\arm-none-eabi\\6.3.1\\include\\stddef.h"
 280              		.file 9 "c:\\gcc_toolchain\\6_2017-q1-update\\arm-none-eabi\\include\\sys\\reent.h"
 281              		.file 10 "Modules/controls.h"
 282              		.file 11 "Drivers/BSP/STM32746G-Discovery/../Components/ft5336/../Common/ts.h"
 283              		.file 12 "Drivers/BSP/STM32746G-Discovery/../Components/ft5336/ft5336.h"
 284              		.file 13 "Drivers/BSP/STM32746G-Discovery/stm32746g_discovery_ts.h"
 285              		.file 14 "Inc/term_io.h"
ARM GAS  C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s 			page 8


DEFINED SYMBOLS
                            *ABS*:00000000 controls.c
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:18     .text.CON_HandleOptionButtonTouched:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:25     .text.CON_HandleOptionButtonTouched:00000000 CON_HandleOptionButtonTouched
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:65     .text.CON_HandleOptionButtonTouched:00000024 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:72     .text.CON_ActivateOption:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:79     .text.CON_ActivateOption:00000000 CON_ActivateOption
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:115    .text.CON_ActivateOption:00000020 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:121    .text.CON_HandleSoundButtonTouched:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:128    .text.CON_HandleSoundButtonTouched:00000000 CON_HandleSoundButtonTouched
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:164    .text.CON_HandleSoundButtonTouched:00000024 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:170    .text.CON_HandleButtonTouched:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:177    .text.CON_HandleButtonTouched:00000000 CON_HandleButtonTouched
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:221    .text.CON_PlayLoadedSound:00000000 $t
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:228    .text.CON_PlayLoadedSound:00000000 CON_PlayLoadedSound
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:246    .data.APP_STATE:00000000 APP_STATE
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:242    .data.APP_STATE:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:253    .rodata.CON_ActivateOption.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:257    .rodata.CON_HandleOptionButtonTouched.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:264    .rodata.CON_HandleSoundButtonTouched.str1.4:00000000 $d
C:\Users\Student\AppData\Local\Temp\ccwHc6hk.s:268    .rodata.str1.4:00000000 $d
                     .debug_frame:00000010 $d

UNDEFINED SYMBOLS
xprintf
